<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucs Store | UA</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --black: #1a1a1a; --gray: #f5f5f5; --accent: #2ecc71; }
        body { font-family: 'Inter', sans-serif; margin: 0; background: #fff; color: var(--black); }
        
        /* HEADER */
        header { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 15px 5%; border-bottom: 1px solid #eee; 
            position: sticky; top: 0; background: #fff; z-index: 1000; 
        }
        .logo { font-size: 22px; font-weight: 700; letter-spacing: 3px; cursor: pointer; }
        
        .search-container { flex-grow: 1; display: flex; justify-content: center; padding: 0 20px; }
        .search-input { 
            width: 100%; max-width: 300px; padding: 8px 15px; 
            border: 1px solid #ddd; border-radius: 20px; outline: none; 
        }

        .nav-right { display: flex; align-items: center; gap: 20px; }
        .cart-icon { position: relative; cursor: pointer; font-size: 20px; }
        .cart-count { 
            position: absolute; top: -8px; right: -10px; background: var(--black); 
            color: white; font-size: 10px; padding: 2px 6px; border-radius: 50%; 
        }

        /* FILTERS BAR */
        .filters-bar { 
            display: flex; justify-content: center; align-items: center; 
            gap: 20px; padding: 20px 5%; background: var(--gray);
        }
        .price-filter { display: flex; align-items: center; gap: 10px; font-size: 14px; }

        /* HERO SECTION */
        .hero-section { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; height: 60vh; }
        .hero-card { position: relative; overflow: hidden; cursor: pointer; }
        .hero-card img { width: 100%; height: 100%; object-fit: cover; transition: 0.8s; }
        .hero-card:hover img { transform: scale(1.05); }
        .hero-label { position: absolute; bottom: 30px; left: 30px; color: white; }
        .hero-label h2 { font-size: 28px; text-transform: uppercase; margin-bottom: 10px; text-shadow: 0 2px 5px rgba(0,0,0,0.5); }

        /* SHOP GRID */
        .container { padding: 40px 5%; }
        .shop-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 30px; }
        
        /* –ö–ê–†–¢–ö–ê –¢–û–í–ê–†–£ */
        .product-card { 
            background: white; border-radius: 8px; overflow: hidden; 
            transition: 0.3s; border: 1px solid transparent; 
        }
        .product-card:hover { border-color: #eee; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .img-box { background: var(--gray); aspect-ratio: 3/4; overflow: hidden; position: relative; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; }
        
        .product-info { padding: 15px; text-align: center; }
        .product-info h3 { font-size: 14px; margin: 0 0 8px; font-weight: 500; height: 34px; overflow: hidden; }
        .product-price { font-weight: 700; font-size: 17px; color: var(--black); margin-bottom: 12px; }
        
        .btn-buy { 
            width: 100%; background: var(--black); color: white; border: none; 
            padding: 10px; border-radius: 4px; cursor: pointer; font-weight: 600; 
            transition: 0.2s; font-size: 12px; text-transform: uppercase;
        }
        .btn-buy:hover { background: #333; }

        /* CART DRAWER */
        #cart-drawer { 
            position: fixed; right: -400px; top: 0; width: 350px; height: 100%; 
            background: white; box-shadow: -5px 0 15px rgba(0,0,0,0.1); 
            z-index: 2000; transition: 0.4s; padding: 30px; 
        }
        #cart-drawer.active { right: 0; }

        @media (max-width: 768px) {
            .hero-section { grid-template-columns: 1fr; }
            .filters-bar { flex-direction: column; }
        }
    </style>
</head>
<body>

<header>
    <div class="logo" onclick="location.reload()">Lucs Store</div>
    <div class="search-container">
        <input type="text" id="search-input" class="search-input" placeholder="–ü–æ—à—É–∫..." oninput="applyFilters()">
    </div>
    <div class="nav-right">
        <select class="lang-select" id="lang-select" onchange="changeLang(this.value)">
            <option value="ua">üá∫üá¶ UKR</option>
            <option value="en">üá∫üá∏ ENG</option>
        </select>
        <div class="cart-icon" onclick="toggleCart()">
            üõí <span class="cart-count" id="cart-count">0</span>
        </div>
    </div>
</header>

<div class="filters-bar">
    <div class="price-filter">
        <span>–¶—ñ–Ω–∞ –¥–æ:</span>
        <input type="range" id="price-range" min="0" max="5000" step="100" value="5000" oninput="updatePriceLabel(this.value)">
        <b id="price-limit">5000</b> –≥—Ä–Ω
    </div>
    <button class="btn-buy" style="width: auto; padding: 5px 15px;" onclick="resetFilters()">–°–∫–∏–Ω—É—Ç–∏ –≤—Å–µ</button>
</div>

<div class="hero-section">
    <div class="hero-card" onclick="setCategory('–ß–æ–ª–æ–≤—ñ–∫–∞–º')">
        <img src="https://images.unsplash.com/photo-1490578474895-699cd4e2cf59?auto=format&fit=crop&w=800&q=80">
        <div class="hero-label"><h2 id="txt-male">–ß–æ–ª–æ–≤—ñ–∫–∞–º</h2></div>
    </div>
    <div class="hero-card" onclick="setCategory('–ñ—ñ–Ω–∫–∞–º')">
        <img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?auto=format&fit=crop&w=800&q=80">
        <div class="hero-label"><h2 id="txt-female">–ñ—ñ–Ω–∫–∞–º</h2></div>
    </div>
</div>

<div class="container" id="shop">
    <h2 id="main-title" style="text-align:center; margin-bottom:30px;">–ù–û–í–ê –ö–û–õ–ï–ö–¶–Ü–Ø</h2>
    <div class="shop-grid" id="grid"></div>
</div>

<div id="cart-drawer">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3 id="txt-cart-title">–ö–æ—à–∏–∫</h3>
        <span style="cursor:pointer" onclick="toggleCart()">‚úï</span>
    </div>
    <div id="cart-items" style="margin-top:20px;"></div>
</div>

<script>
    const API_URL = "https://script.google.com/macros/s/AKfycbxlDxFNIY5sMLN_M-18P92u5eKCTa2pjn-Nj0Ddj1Sa-95yA5sYyljuR7rShT1R97Cy/exec";
    let products = [];
    let cart = [];
    let currentCategory = null;

    async function fetchData() {
        try {
            const res = await fetch(API_URL);
            products = await res.json();
            // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –º–∞–∫—Å —Ü—ñ–Ω—É –¥–∏–Ω–∞–º—ñ—á–Ω–æ
            const maxPrice = Math.max(...products.map(p => p.–¶—ñ–Ω–∞));
            document.getElementById('price-range').max = maxPrice;
            document.getElementById('price-range').value = maxPrice;
            document.getElementById('price-limit').innerText = maxPrice;
            render(products);
        } catch (e) { console.error("–ü–æ–º–∏–ª–∫–∞:", e); }
    }

    function render(data) {
        const grid = document.getElementById('grid');
        grid.innerHTML = data.map(item => `
            <div class="product-card">
                <div class="img-box"><img src="${item['–§–æ—Ç–æ URL']}"></div>
                <div class="product-info">
                    <h3>${item.–ù–∞–∑–≤–∞}</h3>
                    <div class="product-price">${item.–¶—ñ–Ω–∞} –≥—Ä–Ω</div>
                    <button class="btn-buy" onclick="addToCart('${item.–ù–∞–∑–≤–∞}')">–£ –∫–æ—à–∏–∫</button>
                </div>
            </div>
        `).join('');
    }

    function updatePriceLabel(val) {
        document.getElementById('price-limit').innerText = val;
        applyFilters();
    }

    function setCategory(cat) {
        currentCategory = cat;
        applyFilters();
        document.getElementById('shop').scrollIntoView({behavior: 'smooth'});
    }

    function applyFilters() {
        const searchQuery = document.getElementById('search-input').value.toLowerCase();
        const maxPrice = parseFloat(document.getElementById('price-range').value);

        const filtered = products.filter(p => {
            const matchesSearch = p.–ù–∞–∑–≤–∞.toLowerCase().includes(searchQuery);
            const matchesCategory = currentCategory ? p.–ö–∞—Ç–µ–≥–æ—Ä—ñ—è === currentCategory : true;
            const matchesPrice = p.–¶—ñ–Ω–∞ <= maxPrice;
            return matchesSearch && matchesCategory && matchesPrice;
        });

        render(filtered);
    }

    function resetFilters() {
        currentCategory = null;
        document.getElementById('search-input').value = '';
        const max = document.getElementById('price-range').max;
        document.getElementById('price-range').value = max;
        document.getElementById('price-limit').innerText = max;
        render(products);
    }

    function addToCart(name) {
        cart.push(name);
        document.getElementById('cart-count').innerText = cart.length;
        alert("–î–æ–¥–∞–Ω–æ: " + name);
    }

    function toggleCart() {
        document.getElementById('cart-drawer').classList.toggle('active');
    }

    fetchData();
</script>

</body>
</html>
