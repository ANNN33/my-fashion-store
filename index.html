<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucs Store | UA</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --black: #1a1a1a; --gray: #f8f8f8; --dark-gray: #666; --accent: #000; }
        body { font-family: 'Inter', sans-serif; margin: 0; background: #fff; color: var(--black); }
        
        /* HEADER */
        header { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 15px 5%; border-bottom: 1px solid #eee; 
            position: sticky; top: 0; background: #fff; z-index: 1000;
        }
        .logo { font-size: 22px; font-weight: 700; letter-spacing: 3px; cursor: pointer; }
        .search-input { flex-grow: 1; max-width: 300px; margin: 0 20px; padding: 10px; border: 1px solid #ddd; border-radius: 20px; }

        /* GRID */
        .container { padding: 40px 5%; }
        .shop-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 30px; }
        .product-card { cursor: pointer; transition: 0.3s; }
        .img-box { background: var(--gray); aspect-ratio: 3/4; overflow: hidden; border-radius: 8px; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; }

        /* MODAL (–î–ï–¢–ê–õ–Ü –¢–û–í–ê–†–£) */
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.7); display: none; justify-content: center; align-items: center; z-index: 3000; 
        }
        .modal-content { 
            background: white; width: 90%; max-width: 800px; max-height: 90vh; 
            border-radius: 15px; display: grid; grid-template-columns: 1fr 1fr; overflow-y: auto; position: relative;
        }
        .modal-close { position: absolute; top: 20px; right: 20px; font-size: 24px; cursor: pointer; z-index: 10; }
        .modal-info { padding: 40px; }
        .size-btn { 
            border: 1px solid #ddd; padding: 8px 15px; margin: 5px; cursor: pointer; background: white; 
        }
        .size-btn.active { background: black; color: white; border-color: black; }

        /* CART DRAWER */
        #cart-drawer { 
            position: fixed; right: -450px; top: 0; width: 400px; height: 100%; 
            background: white; box-shadow: -5px 0 15px rgba(0,0,0,0.1); z-index: 2000; transition: 0.4s; padding: 30px; overflow-y: auto;
        }
        #cart-drawer.active { right: 0; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-size: 12px; margin-bottom: 5px; font-weight: 600; }
        .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }

        .btn-main { 
            width: 100%; background: black; color: white; border: none; padding: 15px; 
            border-radius: 8px; cursor: pointer; font-weight: 600; text-transform: uppercase; margin-top: 10px;
        }

        @media (max-width: 768px) { .modal-content { grid-template-columns: 1fr; } #cart-drawer { width: 100%; } }
    </style>
</head>
<body>

<header>
    <div class="logo" onclick="location.reload()">Lucs Store</div>
    <input type="text" id="search" class="search-input" placeholder="–ü–æ—à—É–∫..." oninput="filter()">
    <div onclick="toggleCart()" style="cursor:pointer">üõí <span id="count">0</span></div>
</header>

<div class="container">
    <div class="shop-grid" id="grid"></div>
</div>

<div class="modal-overlay" id="modal">
    <div class="modal-content">
        <span class="modal-close" onclick="closeModal()">‚úï</span>
        <div id="modal-img-container" style="background: var(--gray);">
            <img id="modal-img" src="" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="modal-info">
            <h2 id="modal-title"></h2>
            <p id="modal-desc" style="color:var(--dark-gray); font-size:14px;"></p>
            <p><b>–¶—ñ–Ω–∞: </b><span id="modal-price"></span> –≥—Ä–Ω</p>
            <div id="modal-sizes-container" style="margin: 20px 0;">
                <p><small>–í–∏–±–µ—Ä—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä:</small></p>
                <div id="modal-sizes"></div>
            </div>
            <button class="btn-main" onclick="confirmAddToCart()">–î–æ–¥–∞—Ç–∏ —É –∫–æ—à–∏–∫</button>
        </div>
    </div>
</div>

<div id="cart-drawer">
    <h3>–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h3>
    <div id="cart-items" style="margin-bottom:20px;"></div>
    
    <div class="form-group">
        <label>–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É</label>
        <input type="tel" id="user-phone" placeholder="+380 00 000 00 00">
    </div>
    
    <div class="form-group">
        <label>–°–ø–æ—Å—ñ–± –¥–æ—Å—Ç–∞–≤–∫–∏</label>
        <select id="user-delivery">
            <option value="nova_poshta">–ù–æ–≤–∞ –ü–æ—à—Ç–∞</option>
            <option value="ukr_poshta">–£–∫—Ä–ø–æ—à—Ç–∞</option>
            <option value="samovyviz">–°–∞–º–æ–≤–∏–≤—ñ–∑</option>
        </select>
    </div>

    <div style="font-size:18px; font-weight:700; margin:20px 0;">–†–∞–∑–æ–º: <span id="total-sum">0</span> –≥—Ä–Ω</div>
    <button class="btn-main" onclick="checkout()">–ó–∞–º–æ–≤–∏—Ç–∏</button>
    <button onclick="toggleCart()" style="background:none; border:none; width:100%; margin-top:10px; cursor:pointer;">–ù–∞–∑–∞–¥ –¥–æ –ø–æ–∫—É–ø–æ–∫</button>
</div>

<script>
    const API = "https://script.google.com/macros/s/AKfycbxlDxFNIY5sMLN_M-18P92u5eKCTa2pjn-Nj0Ddj1Sa-95yA5sYyljuR7rShT1R97Cy/exec";
    let allProducts = [];
    let cart = [];
    let currentProduct = null;
    let selectedSize = null;

    async function load() {
        const res = await fetch(API);
        allProducts = await res.json();
        render(allProducts);
    }

    function render(data) {
        document.getElementById('grid').innerHTML = data.map(p => `
            <div class="product-card" onclick="openModal('${p.–ù–∞–∑–≤–∞}')">
                <div class="img-box"><img src="${p['–§–æ—Ç–æ URL']}"></div>
                <h4>${p.–ù–∞–∑–≤–∞}</h4>
                <b>${p.–¶—ñ–Ω–∞} –≥—Ä–Ω</b>
            </div>
        `).join('');
    }

    function openModal(name) {
        currentProduct = allProducts.find(p => p.–ù–∞–∑–≤–∞ === name);
        document.getElementById('modal-title').innerText = currentProduct.–ù–∞–∑–≤–∞;
        document.getElementById('modal-desc').innerText = currentProduct.–û–ø–∏—Å || "–û–ø–∏—Å –≤—ñ–¥—Å—É—Ç–Ω—ñ–π";
        document.getElementById('modal-price').innerText = currentProduct.–¶—ñ–Ω–∞;
        document.getElementById('modal-img').src = currentProduct['–§–æ—Ç–æ URL'];
        
        // –†–æ–∑–º—ñ—Ä–∏
        const sizes = currentProduct.–†–æ–∑–º—ñ—Ä–∏ ? currentProduct.–†–æ–∑–º—ñ—Ä–∏.split(',') : [];
        document.getElementById('modal-sizes').innerHTML = sizes.map(s => `
            <button class="size-btn" onclick="selectSize(this, '${s.trim()}')">${s.trim()}</button>
        `).join('');
        
        selectedSize = null;
        document.getElementById('modal').style.display = 'flex';
    }

    function closeModal() { document.getElementById('modal').style.display = 'none'; }

    function selectSize(btn, size) {
        document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        selectedSize = size;
    }

    function confirmAddToCart() {
        if (!selectedSize && currentProduct.–†–æ–∑–º—ñ—Ä–∏) {
            alert("–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∏–±–µ—Ä—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä!");
            return;
        }
        cart.push({ ...currentProduct, selectedSize });
        updateCartUI();
        closeModal();
        toggleCart();
    }

    function updateCartUI() {
        document.getElementById('count').innerText = cart.length;
        document.getElementById('cart-items').innerHTML = cart.map((item, i) => `
            <div style="border-bottom:1px solid #eee; padding:10px 0;">
                <div><b>${item.–ù–∞–∑–≤–∞}</b> (—Ä-—Ä: ${item.selectedSize || '-'})</div>
                <div>${item.–¶—ñ–Ω–∞} –≥—Ä–Ω <span onclick="remove(${i})" style="color:red; cursor:pointer; float:right;">–í–∏–¥–∞–ª–∏—Ç–∏</span></div>
            </div>
        `).join('');
        const total = cart.reduce((sum, item) => sum + item.–¶—ñ–Ω–∞, 0);
        document.getElementById('total-sum').innerText = total;
    }

    function remove(i) { cart.splice(i,1); updateCartUI(); }
    function toggleCart() { document.getElementById('cart-drawer').classList.toggle('active'); }

    function checkout() {
        const phone = document.getElementById('user-phone').value;
        const delivery = document.getElementById('user-delivery').value;
        if (!phone) { alert("–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É!"); return; }
        if (cart.length === 0) { alert("–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π!"); return; }
        
        alert(`–î—è–∫—É—î–º–æ! –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ –Ω–æ–º–µ—Ä ${phone} –ø—Ä–∏–π–Ω—è—Ç–æ. –î–æ—Å—Ç–∞–≤–∫–∞: ${delivery}`);
        cart = [];
        updateCartUI();
        toggleCart();
    }

    load();
</script>

</body>
</html>



